<html>
<head>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<link rel="stylesheet" href="qunit/qunit.css" type="text/css" media="screen" />
	<script type="text/javascript" src="qunit/qunit.js"></script>
	<script type="text/javascript" src="../DocNavHelper.js"></script>
	<script type="text/javascript" src="assets/js/SiteIdentifyWindow.js"></script>
	<script>
		$(document).ready(function(){

			module("Module DocNavHelper");
			
			test("DNH namespace exists", function(){
				ok(DNH, "We expect the Document Navigation Helper module to exist");
			});			
			
			// --- DNH.createXmlDocFromString --
			test("DNH.createXmlDocFromString() is defined", function(){
				ok(DNH.createXmlDocFromString, "We expect createXmlDocFromString() to have been defined");
			});
			test("DNH.createXmlDocFromString() returns a non-null document", function(){
				var result = DNH.createXmlDocFromString("<root/>");
				ok(result, "createXmlDocFromString() returns a non-null value");
			});
			
			// --- DNH.extractValue ---
			test("DNH.extractValue() is defined", function(){
				ok(DNH.extractValue, "We expect extractValue() to have been defined");
			});
			test("DNH extractValue() returns null when document is null", function(){
				ok(!DNH.extractValue(null, "root"), "null expected when document is null");
			});
			test("DNH.extractValue() retrieves element -- happy path", function(){
				var doc = DNH.createXmlDocFromString("<root><child>George</child><child>Bush</child></root>");
				var result = DNH.extractValue(doc, "child");
				equal(result, "George", "Expected George")
			});
			test("DNH.extractValue() retrieves null if element is empty", function(){
				var doc = DNH.createXmlDocFromString("<root><child/><child>Bush</child></root>");
				var result = DNH.extractValue(doc, "child");
				equal(result, null , "Expected null")
			});
			test("DNH.extractValue() retrieves attribute -- happy path", function(){
				var doc = DNH.createXmlDocFromString("<root><child m='Dick'>George</child><child m='Cheney'>Bush</child></root>");
				var result = DNH.extractValue(doc, "child","m");
				equal(result, "Dick", "Expected Dick")
			});
			test("DNH.extractValue() retrieves null if attribute does not exist", function(){
				var doc = DNH.createXmlDocFromString("<root><child>George</child><child m='Cheney'>Bush</child></root>");
				var result = DNH.extractValue(doc, "child","m");
				equal(result, null, "Expected null")
			});

			// --- DNH.isEmptyOrNull ---
			test("DNH.isEmptyOrNull() is defined", function(){
				ok(DNH.isEmptyOrNull, "We expect extractValue() to have been defined");
			});
			test("DNH.isEmptyOrNull() returns false when document is null", function(){
				ok(DNH.isEmptyOrNull(null , "root"), "true expected when document is null");
			});
			test("DNH.isEmptyOrNull() returns false when element not empty", function(){
				var doc = DNH.createXmlDocFromString("<root><child>George</child><child>Bush</child></root>");
				var result = DNH.isEmptyOrNull(doc, "child");
				equal(result, false)
			});
			test("DNH.isEmptyOrNull() returns true if element is empty", function(){
				var doc = DNH.createXmlDocFromString("<root><child/><child>Bush</child></root>");
				var result = DNH.isEmptyOrNull(doc, "child");
				equal(result, true)
			});
			test("DNH.isEmptyOrNull() returns true if element does not exist", function(){
				var doc = DNH.createXmlDocFromString("<root><child/><child>Bush</child></root>");
				var result = DNH.isEmptyOrNull(doc, "chi");
				equal(result, true)
			});
		});
	</script>

</head>
<body>

	<h1 id="qunit-header">QUnit example</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup, will be hidden</div>




</body>
</html>